<!DOCTYPE html>




<html lang="en">

<head>
  <title>Developing Webapps With CloudNativePG, or, Unlocking DevOps | CloudNativePG - PostgreSQL Operator for Kubernetes</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <link rel="preload" href="/fonts/Supreme-Variable.woff2" as="font" type="font/woff2" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" />
  <link href="/main.min.css" rel="stylesheet" />
  <link rel="favicon" href="/favicon/favicon.ico">
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://cloudnative-pg.io/images/hero_image.png">
  <meta name="twitter:title" content="Developing Webapps With CloudNativePG, or, Unlocking DevOps">
  <meta name="twitter:description" content="Bootstrap a simple webapp developed with PostgreSQL into a scalable app with CloudNativePG.">

  <meta property="og:url" content="https://cloudnative-pg.io/blog/developing-webapps-with-cloudnative-pg/">
  <meta property="og:site_name" content="CloudNativePG - PostgreSQL Operator for Kubernetes">
  <meta property="og:title" content="Developing Webapps With CloudNativePG, or, Unlocking DevOps">
  <meta property="og:description" content="Bootstrap a simple webapp developed with PostgreSQL into a scalable app with CloudNativePG.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2023-06-17T11:29:52+02:00">
    <meta property="article:modified_time" content="2023-06-17T11:29:52+02:00">
    <meta property="article:tag" content="Blog">
    <meta property="article:tag" content="Information">
    <meta property="article:tag" content="Devops">
    <meta property="article:tag" content="Applications">
    <meta property="article:tag" content="Tutorial">
    <meta property="og:image" content="https://cloudnative-pg.io/images/hero_image.png">

  
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-SJWWHL48V3"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-SJWWHL48V3');
        }
      </script></head>

<body>
  <div class="h-screen w-screen">
    
<main>
  <header>
    <div class="md:flex md:flex-row md:px-16 md:justify-between py-5">
      <div class="flex justify-between px-4 md:hidden">
        <div>
          
          <a href="/"><img src="/logo/large_logo.svg" class="md:h-14 h-9" alt="Cloud Native Postgres Logo"></a>
        </div>
        <div class="h-6 my-auto" id="toggle-button">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </div>
      </div>
      <div class="md:block hidden">
        
        <a href="/"><img src="/logo/large_logo.svg" class="h-14" alt="Cloud Native Postgres Logo"></a>
      </div>

      <div class="hidden md:block">
        <ul class="md:flex gap-14 text-2xl medium-gray my-5">
          <li><a href="/blog">Blog</a></li>
          <li><a href="/releases">Releases</a></li>
          <li><a href="/docs">Documentation</a></li>
          <li><a href="/support">Support</a></li>
          <li><a href="/end_users">End Users</a></li>
        </ul>
      </div>
      
      <div class="py-4 bg-gray-1 mt-5 hidden" id="navi-list">
        <ul class="md:flex gap-14 text-2xl md:medium-gray charcoal">
          <li class="text-center py-4"><a href="/blog">Blog</a></li>
          <li class="text-center py-4"><a href="/releases">Releases</a></li>
          <li class="text-center py-4"><a href="/docs">Documentation</a></li>
          <li class="text-center py-4"><a href="/support">Support</a></li>
          <li class="text-center py-4"><a href="/end_users">End Users</a></li>
        </ul>
        <div class="flex gap-3 py-4 justify-center bg-gray-1 fill-cnp-blue">
          <a href="https://github.com/cloudnative-pg/cloudnative-pg">
            <img src="/icons/Git.svg" alt="Github">
          </a>
          <a href="https://cloud-native.slack.com/archives/C08MAUJ7NPM">
            <img src="/icons/Slack.svg" alt="Slack">
          </a>
          <a href="https://twitter.com/CloudNativePg">
            <img src="/icons/Twitter.svg" alt="Twitter">
          </a>
          <a href="https://www.youtube.com/channel/UCTGH88W1BiuRRPTzJUDPJyA">
            <img src="/icons/YouTube.svg" alt="YouTube">
          </a>
        </div>
      </div>
      

      <div class="flex gap-5 my-4 fill-cnp-blue hidden md:flex">
        <a class="github-button" href="https://github.com/cloudnative-pg/cloudnative-pg"
          data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large" data-show-count="true"
          aria-label="Star cloudnative-pg/cloudnative-pg on GitHub">Star</a>
        <a href="https://cloud-native.slack.com/archives/C08MAUJ7NPM">
          <img src="/icons/Slack.svg" alt="Slack" title="Join our Slack channel now!">
        </a>
        <a href="https://twitter.com/CloudNativePg">
          <img src="/icons/Twitter.svg" alt="Twitter">
        </a>
        <a href="https://www.youtube.com/channel/UCTGH88W1BiuRRPTzJUDPJyA">
          <img src="/icons/YouTube.svg" alt="YouTube">
        </a>
      </div>
    </div>
  </header>
</main>
<script>
  const toggleButton = document.getElementById('toggle-button')
  const naviList = document.getElementById('navi-list')

  toggleButton.addEventListener('click', () => {
    naviList.classList.toggle('hidden');
  })
</script>


    
<h1 class="h1 text-center mx-auto md:w-3/5">Developing Webapps With CloudNativePG, or, Unlocking DevOps</h1>
<div class="md:w-3/5 mx-auto">
    <div class="px-4">
        
        <div class="flex gap-3 my-10 mx-auto flex justify-center">
            
<div class="my-auto">
    <img src="/authors/jsilvela//jsilvela-gh.jpeg" class="w-10 h-10 rounded-full"
        alt="Jaime Silvela">
</div>
<div>
    <div>
        <h1 class="text-lg charcoal font-bold">
            <a href="/authors/jsilvela">Jaime Silvela</a>
        </h1>
    </div>
    <div class="flex gap-2 text-sm charcoal opacity-75">
    <h6 class="flex gap-2 text-sm charcoal">
        June 17, 2023
        â€¢
        10 minutes
    </h6>
</div>
</div>
        </div>
        

        
        <div>
            <img src="elephants-spider-web.gif" alt="blog image" class="mx-auto">
        </div>
        

        
        <div class="mx-auto my-10">
            <p>In this post I&rsquo;d like to take you on the full journey moving your app written
against PostgreSQL into a containerized, scalable app on a local Kubernetes
cluster running queries against a CloudNativePG database.
It is surprisingly quick and easy. You should be able to get through this in 10
minutes.</p>
<p>Why would you want to develop your app on a local Kubernetes cluster?
There are two powerful reasons:</p>
<ol>
<li>
<p>It unlocks DevOps for database-backed applications. One of the tenets of
DevOps is to blur the line between development and production. A developer
writing against PostgreSQL today may install the database locally,
or perhaps use a <code>docker</code> image to run the database locally, when developing
applications.
However, those applications will be deployed into an environment that
is very different, with hot standby replicas, availability zones, and
backup/restore solutions.
Developing against CloudNativePG, developers can now test the resiliency and
responsiveness of their applications in an environment that mirrors
production.</p>
</li>
<li>
<p>It makes available a lot of powerful components built by the Kubernetes
community. For example, in the
<a href="http://cloudnative-pg.io/documentation/current/quickstart/">Quickstart guide</a>
for CloudNativePG you will find a section that takes you through installing
the <a href="https://prometheus-operator.dev">Prometheus Operator</a>, with a
<a href="https://grafana.com">Grafana</a> dashboard to get metrics for your database.
In a previous post, you can learn how to deploy
<a href="https://hasura.io">Hasura</a> to provide a
<a href="https://cloudnative-pg.io/blog/hasura-graphql/">GraphQL layer for your CloudNativePG cluster</a>.</p>
</li>
</ol>
<p>We&rsquo;re going to be moving a very simple webapp written in Go that uses a
PostgreSQL database. It only has two endpoints, one showing a list of stock
tickers, another updating the listing with new stock values.</p>
<p>The only change the app need be aware of, once we containerize it and move
it into our local Kubernetes cluster, is that the DB connection string will use
the <em>service</em> created by CloudNativePG  for the database, rather than a regular
host name.</p>
<p>In a properly written <a href="https://12factor.net">12-factor</a> webapp, the host,
user credentials and database names would be injected from environment
variables (or an injected
<a href="https://www.postgresql.org/docs/current/libpq-pgpass.html">PGPASSFILE</a>).
If your webapp is written this way, no changes should be necessary to move it
to Kubernetes / CloudNativePG.</p>
<p>Here&rsquo;s the game plan:</p>
<ol>
<li>Follow the quickstart guide to get a local Kubernetes cluster with the
CloudNativePG operator deployed</li>
<li>Containerize the webapp with the provided Dockerfile</li>
<li>Deploy a PostgreSQL cluster with CloudNativePG</li>
<li>Populate the database with the initial schema and data</li>
<li>Install your webapp with the provided Deployment + Service YAML</li>
<li>Start a port-forwarding so you can view the webapp from your computer&rsquo;s
web browser</li>
</ol>
<h3 id="hands-on">Hands-on</h3>
<p>If you don&rsquo;t yet have a local Kubernetes cluster, please refer to the
<a href="http://cloudnative-pg.io/documentation/current/quickstart/">Quickstart guide</a>.
You will need <code>kind</code> installed, as well as <code>kubectl</code> and <code>docker</code>.
If you want to run and compile the webapp locally to kick the tires, you will
also need the <a href="https://go.dev">Go compiler</a> - though this is not necessary if
you will only run it containerized.</p>
<p>We&rsquo;re going to create a Kubernetes cluster from scratch using
<a href="https://kind.sigs.k8s.io">KinD</a>, and call it <code>webapp-demo</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kind create cluster --name webapp-demo
</span></span></code></pre></div><p>This should run quickly. You can make sure it&rsquo;s ready:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get nodes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                        STATUS   ROLES           AGE    VERSION
</span></span><span style="display:flex;"><span>webapp-demo-control-plane   Ready    control-plane   114s   v1.27.1
</span></span></code></pre></div><p>It&rsquo;s a cluster with only one <em>node</em>, but you can easily create clusters with
several worker nodes with KinD.</p>
<h4 id="cloudnativepg-operator">CloudNativePG operator</h4>
<p>Now let&rsquo;s install the CloudNativePG operator. As explained in the
<a href="https://cloudnative-pg.io/documentation/current/installation_upgrade/">installation document</a>,
you can deploy it by applying the latest manifest.
At the time of this writing, this is version 1.20.1:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/release-1.20/releases/cnpg-1.20.1.yaml
</span></span></code></pre></div><p>The installation should take seconds, and you should find the deployment
ready:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get deployments -n cnpg-system
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                      READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span style="display:flex;"><span>cnpg-controller-manager   1/1     <span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">1</span>           18s
</span></span></code></pre></div><h4 id="containerizing-the-webapp">Containerizing the webapp</h4>
<p>You can clone the webapp from its
<a href="https://github.com/jsilvela/kubecon-webapp-cnpg">github project page</a>.
From the top-level directory of the checked-out project, containerize the app
by running:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>docker build -t myapp .
</span></span></code></pre></div><p>You should be able to see the image <code>myapp</code> in the <code>docker images</code> listing.
Now we&rsquo;d like to <em>load</em> this image into our KinD cluster&rsquo;s nodes.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kind load docker-image myapp:latest --name webapp-demo
</span></span></code></pre></div><p>(*) You could have uploaded your Dockerfile into a public container registry,
and used its public handle in the following YAML files, but
for local development and quick iteration, directly loading it may be preferable.</p>
<h4 id="creating-a-postgresql-cluster">Creating a PostgreSQL cluster</h4>
<p>Before we deploy the app, let&rsquo;s create the simplest possible CloudNativePG
cluster.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/main/docs/src/samples/cluster-example.yaml
</span></span></code></pre></div><p>This YAML is part of a set of example cluster manifests provided with
CloudNativePG that show off various features and are ready to deploy.
You can find out more
<a href="https://cloudnative-pg.io/documentation/current/samples/">in the CloudNativePG documentation</a>.</p>
<p>In a few seconds, you should have the PostgreSQL cluster <code>cluster-example</code> up
and ready. It is a 3-instance cluster, with a primary and two hot-standbys.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get clusters
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME              AGE     INSTANCES   READY   STATUS                     PRIMARY
</span></span><span style="display:flex;"><span>cluster-example   2m23s   <span style="color:#ae81ff">3</span>           <span style="color:#ae81ff">3</span>       Cluster in healthy state   cluster-example-1
</span></span></code></pre></div><h4 id="populating-the-database">Populating the database</h4>
<p>The database is empty, but the webapp assumes the existence of two tables
representing stocks and stock tickers:</p>
<p>In the file <a href="https://raw.githubusercontent.com/jsilvela/kubecon-webapp-cnpg/main/migrations/example-changelog.sql"><code>example-changelog.sql</code></a>
you can find:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">--changeset jaime.silvela:1 labels:kubecon-demo
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">--comment: let&#39;s start off with 50 stocks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> stocks <span style="color:#66d9ef">as</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;stock_&#39;</span> <span style="color:#f92672">||</span> generate_series <span style="color:#66d9ef">as</span> stock
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">from</span> generate_series(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">50</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">--rollback DROP TABLE stocks;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">--changeset jaime.silvela:2 labels:kubecon-demo
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">--comment: lets add a bunch of random stock values
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> stock_values <span style="color:#66d9ef">as</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">with</span> dates <span style="color:#66d9ef">as</span> (
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">SELECT</span> generate_series <span style="color:#66d9ef">as</span> date
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">FROM</span> generate_series(<span style="color:#e6db74">&#39;2020-01-01 00:00&#39;</span>::<span style="color:#66d9ef">timestamp</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#39;2022-05-15 00:00&#39;</span>, <span style="color:#e6db74">&#39;24 hours&#39;</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> stock, date, random() <span style="color:#66d9ef">as</span> stock_value
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">from</span> stocks <span style="color:#66d9ef">cross</span> <span style="color:#66d9ef">join</span> dates;
</span></span></code></pre></div><p>There are some comments there that are relevant for
<a href="https://www.liquibase.org"><em>Liquibase</em></a>. By all means, for development of
applications, we strongly encourage that you use a <strong>database migration tool</strong>,
but for this demo we can just push through and apply the changes manually.</p>
<p>Check with <code>kubectl get clusters</code> which is the primary instance of
<code>cluster-example</code>. Let&rsquo;s assume it&rsquo;s <code>cluster-example-1</code>, and let&rsquo;s open
a <code>psql</code> terminal on it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl exec -ti cluster-example-1 -- psql app
</span></span></code></pre></div><p>This will open a session as the <code>postgres</code> superuser.
Applications should run database code with a less-privileged user.
By default, CloudNativePG creates a user called <code>app</code>, and a database owned
by it, also called <code>app</code>. This is a very reasonable default, but of course you
can configure your clusters to fit your needs.</p>
<p>The tables above should be created by the <code>app</code> user.
In our <code>psql</code> session, let&rsquo;s switch:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> <span style="color:#66d9ef">role</span> <span style="color:#66d9ef">TO</span> app;
</span></span></code></pre></div><p>Now you can simply copy and paste the SQL above. You should
see two tables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>app=&gt; \dt
</span></span><span style="display:flex;"><span>           List of relations
</span></span><span style="display:flex;"><span> Schema |     Name     | Type  | Owner
</span></span><span style="display:flex;"><span>--------+--------------+-------+-------
</span></span><span style="display:flex;"><span> public | stock_values | table | app
</span></span><span style="display:flex;"><span> public | stocks       | table | app
</span></span><span style="display:flex;"><span>(2 rows)
</span></span></code></pre></div><p>There are 50 stocks in the <code>stocks</code> table, and 43300 stock values in
the <code>stock_values</code> table:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> stock_values <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> date <span style="color:#66d9ef">DESC</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  stock   <span style="color:#f92672">|</span>            date            <span style="color:#f92672">|</span>      stock_value
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------+----------------------------+------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> stock_43 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2022</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>        <span style="color:#f92672">|</span>     <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">1512641999535136</span>
</span></span><span style="display:flex;"><span> stock_50 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2022</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>        <span style="color:#f92672">|</span>     <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">6586900953813299</span>
</span></span><span style="display:flex;"><span> stock_49 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2022</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>        <span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">052571752658662874</span>
</span></span><span style="display:flex;"><span> stock_48 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2022</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>        <span style="color:#f92672">|</span>     <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">8326971243933354</span>
</span></span><span style="display:flex;"><span> stock_47 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2022</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>        <span style="color:#f92672">|</span>     <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">2769466296850802</span>
</span></span><span style="display:flex;"><span> stock_46 <span style="color:#f92672">|</span> <span style="color:#ae81ff">2022</span><span style="color:#f92672">-</span><span style="color:#ae81ff">05</span><span style="color:#f92672">-</span><span style="color:#ae81ff">15</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>        <span style="color:#f92672">|</span>     <span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">6096716690131085</span>
</span></span><span style="display:flex;"><span> . . .
</span></span><span style="display:flex;"><span> . . . snipped
</span></span></code></pre></div><h4 id="deploying-the-webapp">Deploying the webapp</h4>
<p>OK, we&rsquo;re now ready to deploy our webapp!
The <a href="https://raw.githubusercontent.com/jsilvela/kubecon-webapp-cnpg/main/webapp-deploy.yaml">webapp-deploy.yaml</a>
manifest contains a <em>deployment</em> and a <em>service</em> for our webapp.</p>
<p>The deployment specifies we want 3 replicas for our webapp, and passes
the credentials for the <code>app</code> user for <code>cluster-example</code>.
The Service builds a load balancer to route traffic to any of the 3 replicas.</p>
<p>Simply apply the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f webapp-deploy.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>service/mywebapp created
</span></span><span style="display:flex;"><span>deployment.apps/mywebapp created
</span></span></code></pre></div><p>Right away you can see the 3 pods running the web server, as well as the
3 pods running our database:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get pods
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                        READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>cluster-example-1           1/1     Running   <span style="color:#ae81ff">0</span>          27m
</span></span><span style="display:flex;"><span>cluster-example-2           1/1     Running   <span style="color:#ae81ff">0</span>          27m
</span></span><span style="display:flex;"><span>cluster-example-3           1/1     Running   <span style="color:#ae81ff">0</span>          27m
</span></span><span style="display:flex;"><span>mywebapp-548d97848b-fprvh   1/1     Running   <span style="color:#ae81ff">0</span>          20s
</span></span><span style="display:flex;"><span>mywebapp-548d97848b-vrv8f   1/1     Running   <span style="color:#ae81ff">0</span>          20s
</span></span><span style="display:flex;"><span>mywebapp-548d97848b-whnnp   1/1     Running   <span style="color:#ae81ff">0</span>          20s
</span></span></code></pre></div><p>You can also see the load balancer for our webapp, as well as 3 services
for <code>cluster-example</code> (we&rsquo;ll say more about them shortly.)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl get svc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NAME                 TYPE           CLUSTER-IP      EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>          AGE
</span></span><span style="display:flex;"><span>cluster-example-r    ClusterIP      10.96.103.136   &lt;none&gt;        5432/TCP         29m
</span></span><span style="display:flex;"><span>cluster-example-ro   ClusterIP      10.96.252.145   &lt;none&gt;        5432/TCP         29m
</span></span><span style="display:flex;"><span>cluster-example-rw   ClusterIP      10.96.49.83     &lt;none&gt;        5432/TCP         29m
</span></span><span style="display:flex;"><span>mywebapp             LoadBalancer   10.96.128.43    &lt;pending&gt;     8088:30016/TCP   96s
</span></span></code></pre></div><p>Our webapp is now fully running!
However, our local Kind cluster is not generally visible to the local network.
Let&rsquo;s add port forwarding of the application port for HTTP:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl port-forward service/mywebapp  8080:8088
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Forwarding from 127.0.0.1:8080 -&gt; <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>Forwarding from <span style="color:#f92672">[</span>::1<span style="color:#f92672">]</span>:8080 -&gt; <span style="color:#ae81ff">8080</span>
</span></span></code></pre></div><p>You should now be able to see the app in
<a href="http://localhost:8080">http://localhost:8080</a></p>
<p><img src="index-page.png" alt="index page"></p>
<p>Clicking on the <em>latest stock values</em> link:</p>
<p><img src="stonks.png" alt="stocks page"></p>
<p>You can also click on the <em>&ldquo;Add random stock values&rdquo;</em> link, and then go back on
the stocks page, and you&rsquo;ll see a few changed stock values.</p>
<p>Our webapp is deployed now as promised!</p>
<h3 id="all-in-partially-in">All in? Partially in?</h3>
<p>We mentioned that our web application would use the <em>service</em> associated with
our CloudNativePG cluster. In fact, the service <code>cluster-example-rw</code> will always
point to the cluster&rsquo;s primary instance. If there is a failover or a
switchover, the service will point to the new primary.</p>
<p>Notice there was another service called <code>cluster-example-ro</code>, which, you might
guess, acts as a load-balancer for our read-only replicas.</p>
<p>We glossed over authentication. Our Go app uses environment variables for the
credentials to the database. In the webapp deployment manifest
<a href="https://raw.githubusercontent.com/jsilvela/kubecon-webapp-cnpg/main/webapp-deploy.yaml">webapp-deploy.yaml</a>
you can find the following section:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>        <span style="color:#ae81ff">... snipped ...</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">PG_PASSWORD</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">valueFrom</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">secretKeyRef</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cluster-example-app</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">key</span>: <span style="color:#ae81ff">password</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">PG_USER</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">valueFrom</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">secretKeyRef</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cluster-example-app</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">key</span>: <span style="color:#ae81ff">username</span>
</span></span></code></pre></div><p>This assumes the existence of a
<a href="https://kubernetes.io/docs/concepts/configuration/secret/">Kubernetes secret</a>
called <code>cluster-example-app</code>. Secrets are how Kubernetes handles sensitive
material like passwords or certificates.
The secret <code>cluster-example-app</code> was created by default by CloudNativePG,
(named <code>&lt;clusterName&gt;-app</code> for the <code>app</code> user).</p>
<p>By assuming the existence of a secret, and using <em>convention over
configuration</em>, our webapp deployment manifest had no need to decode the
credentials.</p>
<p>Secrets and Services though, are only available <em>within</em> a Kubernetes cluster.
What if you wanted to deploy the database with CloudNativePG inside Kubernetes,
but run the webapp, or some other components of the system, outside
Kubernetes?</p>
<p>You can, of course, although you lose part of the convenience. We already
saw the possibility of doing port-forwarding. Port-forwarding could be used to
expose one or more of the CloudNativePG services over regular TCP ports.
Credentials too would be handled without much trouble.</p>
<p>For further information, please refer to the <a href="https://cloudnative-pg.io/documentation/current/use_cases/">use cases discussion</a>.</p>
<h3 id="where-to-go-from-here">Where to go from here</h3>
<p>We&rsquo;ve created a replicated webserver running inside a Kubernetes cluster, and
a PostgreSQL cluster with 2 standbys, in under 10 minutes.
We mentioned DevOps and blurring the line between development and production.</p>
<p>How about testing some failure scenarios?</p>
<p>We could create load on the webapp, introducing new stock values by repeatedly
hitting the <code>/update</code> endpoint.
Using the <a href="https://github.com/rakyll/hey"><em>hey</em></a> load generator:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>hey -z 100s -q <span style="color:#ae81ff">1</span> -c <span style="color:#ae81ff">2</span>  http://localhost:8080/update
</span></span></code></pre></div><p>And during this time, how about killing the primary instance?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl delete pod cluster-example-1
</span></span></code></pre></div><p>The webapp might be momentarily unavailable, and you might see
<code>pq: the database system is shutting down</code> in the <em>latests stocks</em> page.
Recovery should take no longer than 1-2 seconds, as a replica would be
promoted by the CloudNativePG operator.
Since the webapp was written using the service, it will recover once
the new primary is in place.</p>
<p>But you might think that for read-only endpoints like the page showing
the latest stock values, the webapp could leverage the <code>cluster-example-ro</code>
service.
If it did, there would not be an outage when we killed the primary. These
are tradeoffs that you can now explore meaningfully at development time.</p>
<p>You could add connection pooling. CloudNativePG offers support out of the
box for <a href="https://www.pgbouncer.org/">PgBouncer</a> through the <code>Pooler</code> resource.
You can find more information in the
<a href="https://cloudnative-pg.io/documentation/current/connection_pooling/">connection pooling document</a>.</p>
<p>There&rsquo;s a lot of power to experiment and iterate through your system design.</p>
<p>We mentioned in the beginning that the
<a href="http://cloudnative-pg.io/documentation/current/quickstart/">quickstart guide</a>
takes you through adding Prometheus / Grafana monitoring for your database
cluster. It would not be difficult to publish Prometheus metrics for your
webserver too, and have a dashboard for your full system.</p>
<p>The point is that you have at your disposal an environment where you can test
disaster recovery, realistic loads, scaling, upgrades, and any other day-2
operations you could want.</p>
<p>It&rsquo;s a good time to be a developer!</p>

        </div>
        
    </div>

    <div class="px-4">
        <h3 class="text-xl font-bold mb-6">Categories in this blog post</h3>
        <div class="text-xs space-y-1.5 mb-14">
            <ul class="text-sm">
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="/tags/blog"
                        class="mr-2">blog</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="/tags/information"
                        class="mr-2">information</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="/tags/devops"
                        class="mr-2">devops</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="/tags/applications"
                        class="mr-2">applications</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="/tags/tutorial"
                        class="mr-2">tutorial</a></li>
                
            </ul>

        </div>
    </div>

    
    <div class="space-y-10 md:pt-10">
            

    
    <div class="px-4">
        <h3 class="text-xl font-bold mb-6">All categories</h3>
        <div class="text-xs space-y-1.5 mb-14">
            <ul class="text-sm">
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/alerts/"
                        class="mr-2">Alerts</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/applications/"
                        class="mr-2">Applications</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/blog/"
                        class="mr-2">Blog</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/chaos-engineering/"
                        class="mr-2">Chaos-Engineering</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/cloudnativepg/"
                        class="mr-2">Cloudnativepg</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/cncf/"
                        class="mr-2">Cncf</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/cnpg/"
                        class="mr-2">Cnpg</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/containers/"
                        class="mr-2">Containers</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/continuous-delivery/"
                        class="mr-2">Continuous-Delivery</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/continuous-integration/"
                        class="mr-2">Continuous-Integration</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/dashboards/"
                        class="mr-2">Dashboards</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/dba/"
                        class="mr-2">Dba</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/devops/"
                        class="mr-2">Devops</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/failover/"
                        class="mr-2">Failover</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/github/"
                        class="mr-2">Github</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/grafana/"
                        class="mr-2">Grafana</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/graphql/"
                        class="mr-2">Graphql</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/hasura/"
                        class="mr-2">Hasura</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/helm/"
                        class="mr-2">Helm</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/imagecatalog/"
                        class="mr-2">Imagecatalog</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/images/"
                        class="mr-2">Images</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/information/"
                        class="mr-2">Information</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/k8s/"
                        class="mr-2">K8s</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/kubernetes/"
                        class="mr-2">Kubernetes</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/lfx/"
                        class="mr-2">Lfx</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/linux/"
                        class="mr-2">Linux</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/mentorship/"
                        class="mr-2">Mentorship</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/migrations/"
                        class="mr-2">Migrations</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/open-source/"
                        class="mr-2">Open-Source</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/operator/"
                        class="mr-2">Operator</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/pdb/"
                        class="mr-2">Pdb</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/performance/"
                        class="mr-2">Performance</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/pg16beta1/"
                        class="mr-2">Pg16beta1</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/pgbouncer/"
                        class="mr-2">Pgbouncer</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/pgtap/"
                        class="mr-2">PgTAP</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/pgxn/"
                        class="mr-2">PGXN</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/pooler/"
                        class="mr-2">Pooler</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/postgres/"
                        class="mr-2">Postgres</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/postgresql/"
                        class="mr-2">Postgresql</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/preview/"
                        class="mr-2">Preview</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/programming/"
                        class="mr-2">Programming</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/prometheus/"
                        class="mr-2">Prometheus</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/release/"
                        class="mr-2">Release</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/service-mesh/"
                        class="mr-2">Service-Mesh</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/spotlight/"
                        class="mr-2">Spotlight</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/sqitch/"
                        class="mr-2">Sqitch</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/tablespaces/"
                        class="mr-2">Tablespaces</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/testing/"
                        class="mr-2">Testing</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/tutorial/"
                        class="mr-2">Tutorial</a></li>
                
                <li class="bg-charcoal-opacity-10 py-1 px-2.5 inline-block mr-2 mb-2"><a href="https://cloudnative-pg.io/tags/volumesnapshots/"
                        class="mr-2">Volumesnapshots</a></li>
                
            </ul>

        </div>
    </div>
    

    
    <div>
        <h3 class="text-xl font-bold pb-6 px-4">Latest Posts</h3>
        <div class="space-y-10 px-4">
            
            
            <div class="p-8 bg-white drop-shadow-md md:w-2/6 rounded-md border-2 border-slate-50 align-super inline-grid max-w-xs"
                style="min-width: 260px;">
                
                <div class="flex gap-3 mb-2.5">
                    
<div class="my-auto">
    <img src="/authors/fdrees//floor.jpg" class="w-10 h-10 rounded-full"
        alt="Floor Drees">
</div>
<div class="my-auto">
    <div>
        <h1 class="text-lg charcoal font-bold">
            Floor Drees
        </h1>
    </div>
</div>
                </div>
                
                <a href="/blog/contributor-highlight-david-wheeler/">
                    
                    <div>
                        <img src="/blog/contributor-highlight-david-wheeler//theory.jpg" class="object-fill"
                            alt="Blog image">
                    </div>
                    <div class="charcoal">
                        <h2 class="text-lg my-2.5 font-bold">Contributor Spotlight: David Wheeler</h2>
                    </div>
                    

                    <div class="flex gap-2 text-sm charcoal opacity-75">
    <h6 class="flex gap-2 text-sm charcoal">
        May 26, 2025
        â€¢
        2 minutes
    </h6>
</div>
                </a>
            </div>
            
            <div class="p-8 bg-white drop-shadow-md md:w-2/6 rounded-md border-2 border-slate-50 align-super inline-grid max-w-xs"
                style="min-width: 260px;">
                
                <div class="flex gap-3 mb-2.5">
                    
<div class="my-auto">
    <img src="/authors/fdrees//floor.jpg" class="w-10 h-10 rounded-full"
        alt="Floor Drees">
</div>
<div class="my-auto">
    <div>
        <h1 class="text-lg charcoal font-bold">
            Floor Drees
        </h1>
    </div>
</div>
                </div>
                
                <a href="/blog/contributor-highlight-francesco-canovai/">
                    
                    <div>
                        <img src="/blog/contributor-highlight-francesco-canovai//fcanovai.jpg" class="object-fill"
                            alt="Blog image">
                    </div>
                    <div class="charcoal">
                        <h2 class="text-lg my-2.5 font-bold">Contributor Spotlight: Francesco Canovai</h2>
                    </div>
                    

                    <div class="flex gap-2 text-sm charcoal opacity-75">
    <h6 class="flex gap-2 text-sm charcoal">
        May 21, 2025
        â€¢
        2 minutes
    </h6>
</div>
                </a>
            </div>
            
            <div class="p-8 bg-white drop-shadow-md md:w-2/6 rounded-md border-2 border-slate-50 align-super inline-grid max-w-xs"
                style="min-width: 260px;">
                
                <div class="flex gap-3 mb-2.5">
                    
<div class="my-auto">
    <img src="/authors/jsilvela//jsilvela-gh.jpeg" class="w-10 h-10 rounded-full"
        alt="Jaime Silvela">
</div>
<div class="my-auto">
    <div>
        <h1 class="text-lg charcoal font-bold">
            Jaime Silvela
        </h1>
    </div>
</div>
                </div>
                
                <a href="/blog/migrations-with-atlas-and-cloudnativepg/">
                    
                    <div>
                        <img src="/blog/migrations-with-atlas-and-cloudnativepg//elephant-migration.jpg" class="object-fill"
                            alt="Blog image">
                    </div>
                    <div class="charcoal">
                        <h2 class="text-lg my-2.5 font-bold">Migrations With Atlas and CloudNativePG</h2>
                    </div>
                    

                    <div class="flex gap-2 text-sm charcoal opacity-75">
    <h6 class="flex gap-2 text-sm charcoal">
        May 14, 2025
        â€¢
        5 minutes
    </h6>
</div>
                </a>
            </div>
            
            <div class="p-8 bg-white drop-shadow-md md:w-2/6 rounded-md border-2 border-slate-50 align-super inline-grid max-w-xs"
                style="min-width: 260px;">
                
                <div class="flex gap-3 mb-2.5">
                    
<div class="my-auto">
    <img src="/authors/jgonzalez//jgonzalez-gh.jpeg" class="w-10 h-10 rounded-full"
        alt="Jonathan Gonzalez V.">
</div>
<div class="my-auto">
    <div>
        <h1 class="text-lg charcoal font-bold">
            Jonathan Gonzalez V.
        </h1>
    </div>
</div>
                </div>
                
                <a href="/blog/lfx-cncf-mentorship/">
                    
                    <div>
                        <img src="/blog/lfx-cncf-mentorship//lfx_mentorship.png" class="object-fill"
                            alt="Blog image">
                    </div>
                    <div class="charcoal">
                        <h2 class="text-lg my-2.5 font-bold">CloudNativePG part of LFX Mentorship - sign up as a mentee!</h2>
                    </div>
                    

                    <div class="flex gap-2 text-sm charcoal opacity-75">
    <h6 class="flex gap-2 text-sm charcoal">
        May 13, 2025
        â€¢
        2 minutes
    </h6>
</div>
                </a>
            </div>
            
            <div class="p-8 bg-white drop-shadow-md md:w-2/6 rounded-md border-2 border-slate-50 align-super inline-grid max-w-xs"
                style="min-width: 260px;">
                
                <div class="flex gap-3 mb-2.5">
                    
<div class="my-auto">
    <img src="/authors/fdrees//floor.jpg" class="w-10 h-10 rounded-full"
        alt="Floor Drees">
</div>
<div class="my-auto">
    <div>
        <h1 class="text-lg charcoal font-bold">
            Floor Drees
        </h1>
    </div>
</div>
                </div>
                
                <a href="/blog/contributor-highlight-jeff-mealo/">
                    
                    <div>
                        <img src="/blog/contributor-highlight-jeff-mealo//jeff.jpeg" class="object-fill"
                            alt="Blog image">
                    </div>
                    <div class="charcoal">
                        <h2 class="text-lg my-2.5 font-bold">Contributor Spotlight: Jeff Mealo</h2>
                    </div>
                    

                    <div class="flex gap-2 text-sm charcoal opacity-75">
    <h6 class="flex gap-2 text-sm charcoal">
        May 11, 2025
        â€¢
        4 minutes
    </h6>
</div>
                </a>
            </div>
            
            <div class="p-8 bg-white drop-shadow-md md:w-2/6 rounded-md border-2 border-slate-50 align-super inline-grid max-w-xs"
                style="min-width: 260px;">
                
                <div class="flex gap-3 mb-2.5">
                    
<div class="my-auto">
    <img src="/authors/fdrees//floor.jpg" class="w-10 h-10 rounded-full"
        alt="Floor Drees">
</div>
<div class="my-auto">
    <div>
        <h1 class="text-lg charcoal font-bold">
            Floor Drees
        </h1>
    </div>
</div>
                </div>
                
                <a href="/blog/contributor-highlight-philippe-scorsolini/">
                    
                    <div>
                        <img src="/blog/contributor-highlight-philippe-scorsolini//philippe.png" class="object-fill"
                            alt="Blog image">
                    </div>
                    <div class="charcoal">
                        <h2 class="text-lg my-2.5 font-bold">Contributor Spotlight: Philippe Scorsolini</h2>
                    </div>
                    

                    <div class="flex gap-2 text-sm charcoal opacity-75">
    <h6 class="flex gap-2 text-sm charcoal">
        May 4, 2025
        â€¢
        2 minutes
    </h6>
</div>
                </a>
            </div>
            
            
        </div>
    </div>
    

    </div>
    
</div>


    <footer class="text-center pb-24">
    <p class="text-sm charcoal md:w-1/2 mx-auto md:pt-10 px-6 pt-12">

      Copyright &copy; CloudNativePG a Series of LF Projects, LLC.<br />
      For website terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org/policies/">LF Projects, LLC Policies</a>.<br /><br />

      <a href="https://www.linuxfoundation.org/trademark-usage/" class="red-1">The Linux Foundation has registered trademarks and uses trademarks</a>.<br /><br />

      <a href="https://www.postgresql.org/about/policies/trademarks"
        class="red-1">Postgres, PostgreSQL and the Slonik Logo are trademarks or
        registered trademarks of the PostgreSQL Community Association of Canada, and
        used with their permission</a>.

    </p>
</footer>

  </div>
</body>

</html>
