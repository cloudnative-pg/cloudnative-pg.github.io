<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="The CloudNativePG Contributors" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Release notes for CloudNativePG 1.20 - CloudNativePG</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../css/override.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Release notes for CloudNativePG 1.20";
        var mkdocs_page_input_path = "release_notes/v1.20.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> CloudNativePG
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">CloudNativePG</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../before_you_start/">Before You Start</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../use_cases/">Use cases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../installation_upgrade/">Installation and upgrades</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../quickstart/">Quickstart</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../bootstrap/">Bootstrap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../database_import/">Importing Postgres databases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../instance_manager/">Postgres instance manager</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../scheduling/">Scheduling</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../resource_management/">Resource management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../failure_modes/">Failure Modes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../rolling_update/">Rolling Updates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../replication/">Replication</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../backup_recovery/">Backup and Recovery</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../postgresql_conf/">PostgreSQL Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../declarative_role_management/">Database Role Management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../operator_conf/">Operator configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../cluster_conf/">Instance Pod Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../storage/">Storage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../labels_annotations/">Labels and annotations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../monitoring/">Monitoring</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../logging/">Logging</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../certificates/">Certificates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../ssl_connections/">Client TLS/SSL Connections</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../applications/">Connecting from an application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../connection_pooling/">Connection Pooling</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../replica_cluster/">Replica clusters</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../kubernetes_upgrade/">Kubernetes Upgrade</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../expose_pg_services/">Exposing Postgres Services</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../kubectl-plugin/">CloudNativePG Plugin</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../failover/">Automated failover</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../fencing/">Fencing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../declarative_hibernation/">Declarative hibernation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../postgis/">PostGIS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../e2e/">End-to-End Tests</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../container_images/">Container Image Requirements</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../operator_capability_levels/">Operator Capability Levels</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../controller/">Custom Pod Controller</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../samples/">Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../networking/">Networking</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../benchmarking/">Benchmarking</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../commercial_support/">Commercial support</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../faq/">Frequently Asked Questions (FAQ)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../api_reference/">API Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../supported_releases/">Supported releases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../">Release notes</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">CloudNativePG</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Release notes for CloudNativePG 1.20</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="release-notes-for-cloudnativepg-120">Release notes for CloudNativePG 1.20</h1>
<p>History of user-visible changes in the 1.20 minor release of CloudNativePG.</p>
<p>For a complete list of changes, please refer to the
<a href="https://github.com/cloudnative-pg/cloudnative-pg/commits/release-1.20">commits</a>
on the release branch in GitHub.</p>
<h2 id="version-1202">Version 1.20.2</h2>
<p><strong>Release date:</strong> July 27, 2023</p>
<p>Enhancements:</p>
<ul>
<li>New <code>logs</code> command in the kubectl plugin, to retrieve or follow the logs
  of all pods in a cluster (#2375)</li>
<li>Add support for specifying priorityClassName in pods, helping Kubernetes
  make scheduling decisions (#2043)</li>
<li>Add a metric and status field to monitor node usage by a CloudNativePG cluster (#2257)</li>
<li>Various enhancements to the documentation:<ul>
<li>Add troubleshooting instructions relating to hugepages (#1390)</li>
<li>Extend the FAQs page (#2344)</li>
</ul>
</li>
</ul>
<p>Technical enhancements:</p>
<ul>
<li>Add a check at the start of the restore process to ensure it can proceed; give
  improved error diagnostics if it cannot (#2419)</li>
<li>Improve handling of non-expiring passwords in managed roles (#2334)</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Ensure the logic of setting the recovery target matches that of Postgres (#2460)</li>
<li>Prevent taking over service accounts not owned by the cluster, by setting
  ownerMetadata only during service account creation (#2462)</li>
<li>Ensure correct permissions of the PGDATA directory for initdb and restore (#2384)</li>
<li>Prevent a possible crash of the instance manager during the configuration reload (#2393)</li>
<li>Prevent the LastFailedArchiveTime alert from triggering if a new backup has been
  successful after the failed ones (#1751)</li>
<li>Prevent services from targeting non-instance pods (#2336)</li>
</ul>
<p>Security:</p>
<ul>
<li>Updated all project dependencies to the latest versions</li>
</ul>
<h2 id="version-1201">Version 1.20.1</h2>
<p><strong>Release date:</strong> June 12, 2023</p>
<p>Enhancements:</p>
<ul>
<li>Add the <code>snapshot</code> command to the <code>cnpg</code> plugin to create a consistent cold
  backup of the cluster from a standby using the Kubernetes <code>VolumeSnapshot</code>
  standard resource (#1960)</li>
<li>First implementation of recovery from a set of CSI VolumeSnapshot resources
  via the <code>.spec.bootstrap.recovery.volumeSnapshot</code> stanza (#1960)</li>
<li>Add <code>pg_failover_slots</code> to managed extensions (#2057)</li>
<li>Improved Grafana dashboard with updated instructions in the documentation and
  the quickstart guide (#1916)</li>
<li>Introduce the <code>schemaOnly</code> option in the <code>import</code> stanza, to avoid exporting
  and importing data when you bootstrap a new Postgres Cluster from one or more
  existing databases (#2234)</li>
<li>Add support for TopologySpreadConstraints to manage scheduling of instance
  pods (#2202)</li>
<li>Add <code>PodMonitor</code> support to the <code>Pooler</code>for PgBouncer (#2034)</li>
<li>Add option to override the default Kubernetes scheduler (#2013)</li>
<li>Allow configuration of deployment strategy of a <code>Pooler</code> resource (#1983)</li>
<li>Update default PostgreSQL version to 15.3 (#2022)</li>
<li>Use PgBouncer 1.19 by default (#2018)</li>
</ul>
<p>Technical enhancements:</p>
<ul>
<li>Updated k8s kind tested versions (#2054)</li>
<li>Declarative roles should ignore passwords if not set, easing management of
  previously existing roles  (#2029)</li>
<li>Use separate transactions to reconcile role credentials. Before this patch,
  the operator would revert the synchronization of all roles if one failed
  (#2004)</li>
<li>Ensure fencing is removed during cluster restore (#1987)</li>
<li>Improve logging when deleting Pods (#2136)</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Fix unbound variable with k3s engine which could prevent setup on K3’s (#2157)</li>
<li>Report the correct PG version in the metrics (#2126)</li>
<li>Use the correct walStorage key in the documentation (#2140)</li>
<li>Halt reconciliation when the operator cannot connect with the instances, and
  provide a clear diagnostic on such occasions. This will help clarify cases
  where network issues obstruct normal operation of CloudNativePG (#2145),
  (#2233), and (#2242)</li>
</ul>
<h2 id="version-1200">Version 1.20.0</h2>
<p><strong>Release date:</strong> April 27, 2023</p>
<div class="admonition important">
<p class="admonition-title">Important changes from previous versions</p>
<p>CloudNativePG 1.20 introduces some changes to the default behavior of a
few features for newly created <code>Cluster</code> resources, compared to previous
versions of the operator. The goal of these changes is to improve the
resilience of a Postgres cluster out of the box through convention over
configuration. For clusters with one or more replicas:</p>
<ul>
<li>Backup from standby is now enabled by default, unless <code>target</code> is
    explicitly set to <code>primary</code></li>
<li>Restart of the primary is now the default method to complete the
    unsupervised rolling update procedure (<code>primaryUpdateMethod</code>
    defaults to <code>restart</code>, unless explicitly set to <code>switchover</code>)</li>
</ul>
<p>For further information, please refer to the
<a href="../../installation_upgrade/#upgrading-to-120-from-a-previous-minor-version">"Installation and upgrades" section</a>.</p>
</div>
<p>Features:</p>
<ul>
<li><strong>Declarative role management:</strong> introduce the <code>managed.roles</code> stanza in the
  <code>Cluster</code> spec to provide full lifecycle management of database roles, by
  providing an abstraction to the related DDL commands in PostgreSQL, such as
  <code>CREATE ROLE</code> and <code>ALTER ROLE</code> (#1524, #1793 and #1815)</li>
<li><strong>Declarative hibernation of a PostgreSQL cluster:</strong> introduce a new
  annotation called <code>cnpg.io/hibernation</code> to declaratively hibernate a
  PostgreSQL cluster by deleting all pods and keeping the PVCs only; the feature
  also implements the inverse procedure (#1657)</li>
</ul>
<p>Enhancements:</p>
<ul>
<li>Improve the <code>--logs</code> option of the <code>report</code> command of the <code>cnpg</code> plugin for
  <code>kubectl</code> to also include the previous logs where available (#1811)</li>
<li>The <code>-any</code> service is now disabled by default (#1755)</li>
</ul>
<p>Security:</p>
<ul>
<li>Enable customization of <code>SeccompProfile</code> through override via a local file (#1827)</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Apply the PostgreSQL configuration provided by the user during the <code>initdb</code>
  bootstrap phase, before the server is started the first time (#1858)</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
