<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="The CloudNativePG Contributors" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Release notes for CloudNativePG 1.16 - CloudNativePG</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Release notes for CloudNativePG 1.16";
        var mkdocs_page_input_path = "release_notes/v1.16.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> CloudNativePG
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">CloudNativePG</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../before_you_start/">Before You Start</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../use_cases/">Use cases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../installation_upgrade/">Installation and upgrades</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../quickstart/">Quickstart</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../bootstrap/">Bootstrap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../database_import/">Importing Postgres databases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../instance_manager/">Postgres instance manager</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../scheduling/">Scheduling</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../resource_management/">Resource management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../failure_modes/">Failure Modes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../rolling_update/">Rolling Updates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../replication/">Replication</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../backup_recovery/">Backup and Recovery</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../postgresql_conf/">PostgreSQL Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../operator_conf/">Operator configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../storage/">Storage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../labels_annotations/">Labels and annotations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../monitoring/">Monitoring</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../logging/">Logging</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../certificates/">Certificates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../ssl_connections/">Client TLS/SSL Connections</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../applications/">Connecting from an application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../connection_pooling/">Connection Pooling</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../replica_cluster/">Replica clusters</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../kubernetes_upgrade/">Kubernetes Upgrade</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../expose_pg_services/">Exposing Postgres Services</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../cnpg-plugin/">CloudNativePG Plugin</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../failover/">Automated failover</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../fencing/">Fencing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../postgis/">PostGIS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../e2e/">End-to-End Tests</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../container_images/">Container Image Requirements</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../operator_capability_levels/">Operator Capability Levels</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../samples/">Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../commercial_support/">Commercial support</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../faq/">Frequently Asked Questions (FAQ)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../api_reference/">API Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../supported_releases/">Supported releases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../">Release notes</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">CloudNativePG</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li><li>Release notes for CloudNativePG 1.16</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="release-notes-for-cloudnativepg-116">Release notes for CloudNativePG 1.16</h1>
<p>History of user-visible changes in the 1.16 minor release of CloudNativePG.</p>
<p>For a complete list of changes, please refer to the
<a href="https://github.com/cloudnative-pg/cloudnative-pg/commits/release-1.16">commits</a>
on the release branch in GitHub.</p>
<h2 id="version-1161">Version 1.16.1</h2>
<p><strong>Release date:</strong> Aug 11, 2022</p>
<p>Enhancements:</p>
<ul>
<li>Enable the configuration of the <code>huge_pages</code> option for PostgreSQL (#456)</li>
<li>Enhance log during promotion and demotion, after a failover or a switchover,
  by printing the time elapsed between the request of promotion and the actual
  availability for writes (#371)</li>
<li>Introduce the PostgreSQL cluster’s timeline in the cluster status (#462)</li>
<li>Add the <code>instanceName</code> and <code>clusterName</code> labels on jobs, pods, and PVCs to
  improve interaction with these resources (#534)</li>
<li>Add instructions on how to create PostGIS clusters (#570)</li>
</ul>
<p>Security:</p>
<ul>
<li>Explicitly assign <code>securityContext</code> to the <code>Pooler</code> deployment (#485)</li>
<li>Add read timeout values to the internal web servers to prevent Slowloris DDoS (#437)</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Use the correct delays for restarts (<code>stopDelay</code>) and for switchover
  (<code>switchoverDelay</code>), as they were erroneously swapped before. This is an
  important fix, as it might block indefinitely restarts if <code>switchoverDelay</code> is
  not set and uses the default value of 40000000 seconds (#531)</li>
<li>Prevent the metrics collector from causing panic when the query returns an
  error (#396)</li>
<li>Removing an unsafe debug message that was referencing an unchecked pointer,
  leading in some cases to segmentation faults regardless of the log level (#491)</li>
<li>Prevent panic when fencing in case the cluster had no annotation (#512)</li>
<li>Avoid updating the CRD if a TLS certificate is not changed (#501)</li>
<li>Handle conflicts while injecting a certificate in the CRD (#547)</li>
<li>Database import:<ul>
<li>Use the <code>postgres</code> user while running <code>pg_restore</code> in database import (#411)</li>
<li>Document the requirement to explicitly set  <code>sslmode</code> in the monolith import
  case to control SSL connections with the origin external server (#572)</li>
<li>Fix bug that prevented import from working when <code>dbname</code> was specified in
  <code>connectionParameters</code> (#569)</li>
</ul>
</li>
<li>Backup and recovery:<ul>
<li>Correctly pass object store credentials in Google Cloud (#454)</li>
</ul>
</li>
</ul>
<h2 id="version-1160">Version 1.16.0</h2>
<p><strong>Release date:</strong> Jul 7, 2022 (minor release)</p>
<p>Features:</p>
<ul>
<li><strong>Offline data import and major upgrades for PostgreSQL:</strong> introduce the
  <code>bootstrap.initdb.import</code> section to provide a way to import objects via the
  network from an existing PostgreSQL instance (even outside Kubernetes) inside a
  brand new CloudNativePG cluster using the PostgreSQL logical backup concept
  (<code>pg_dump</code>/<code>pg_restore</code>). The same method can be used to perform major
  PostgreSQL upgrades on a new cluster. The feature introduces two types of
  import: <code>microservice</code> (import one database only in the new cluster) and
  <code>monolith</code> (import the selected databases and roles from the existing
  instance).</li>
<li>Anti-affinity rules for synchronous replication based on labels: make sure
  that synchronous replicas are running on nodes with different characteristics
  than the node where the primary is running, for example, availability zone</li>
</ul>
<p>Enhancements:</p>
<ul>
<li>Improve fencing by removing the existing limitation that disables failover
  when one or more instances are fenced</li>
<li>Enhance the automated extension management framework by checking whether an
  extension exists in the catalog instead of  running <code>DROP EXTENSION IF EXISTS</code>
  unnecessarily</li>
<li>Improve logging of the instance manager during switchover and failover</li>
<li>Enable redefining the name of the database of the application, its owner, and
  the related secret when recovering from an object store or cloning an
  instance via <code>pg_basebackup</code> (this was only possible in the <code>initdb</code> bootstrap
  so far)</li>
<li>Backup and recovery:<ul>
<li>Require Barman &gt;= 3.0.0 for future support of PostgreSQL 15</li>
<li>Enable Azure AD Workload Identity for Barman Cloud backups through the
  <code>inheritFromAzureAD</code> option</li>
<li>Introduce <code>barmanObjectStore.s3Credentials.region</code> to define the region
  in AWS (<code>AWS_DEFAULT_REGION</code>) for both backup and recovery object stores</li>
</ul>
</li>
<li>Support for Kubernetes 1.24</li>
</ul>
<p>Changes:</p>
<ul>
<li>Set the default operand image to PostgreSQL 14.4</li>
<li>Use conditions from the Kubernetes API instead of relying on our own
  implementation for backup and WAL archiving</li>
</ul>
<p>Fixes:</p>
<ul>
<li>Fix the initialization order inside the <code>WithActiveInstance</code> function that
  starts the CSV log pipe for the PostgreSQL server, ensuring proper logging in
  the cluster initialization phase - this is especially useful in bootstrap
  operations like recovery from a backup are failing (before this patch, such
  logs were not sent to the standard output channel and were permanently lost)</li>
<li>Avoid an unnecessary switchover when a hot standby sensitive parameter is
  decreased, and the primary has already restarted</li>
<li>Properly quote role names in <code>ALTER ROLE</code> statements</li>
<li>Backup and recovery:<ul>
<li>Fix the algorithm detecting the closest Barman backup for PITR, which was
  comparing the requested recovery timestamp with the backup start instead
  of the end</li>
<li>Fix Point in Time Recovery based on a transaction ID, a named restore
  point, or the “immediate” target by providing a new field called
  <code>backupID</code> in the <code>recoveryTarget</code> section</li>
<li>Fix encryption parameters invoking <code>barman-cloud-wal-archive</code> and
  <code>barman-cloud-backup</code> commands</li>
<li>Stop ignoring <code>barmanObjectStore.serverName</code> option when recovering from
  a backup object store using a server name that doesn’t match the current
  cluster name</li>
</ul>
</li>
<li><code>cnpg</code> plug-in:<ul>
<li>Make sure that the plug-in complies with the <code>-n</code> parameter when
  specified by the user</li>
<li>Fix the <code>status</code> command to sort results and remove variability in the
  output</li>
</ul>
</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
