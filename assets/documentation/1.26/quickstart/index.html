<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="The CloudNativePG Contributors" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Quickstart - CloudNativePG v1.26</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/override.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Quickstart";
        var mkdocs_page_input_path = "quickstart.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CloudNativePG v1.26
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">CloudNativePG</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../before_you_start/">Before You Start</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../use_cases/">Use cases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../installation_upgrade/">Installation and upgrades</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Quickstart</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#part-1-setup-the-local-kubernetes-playground">Part 1: Setup the local Kubernetes playground</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#minikube">Minikube</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#kind">Kind</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#part-2-install-cloudnativepg">Part 2: Install CloudNativePG</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#part-3-deploy-a-postgresql-cluster">Part 3: Deploy a PostgreSQL cluster</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#part-4-monitor-clusters-with-prometheus-and-grafana">Part 4: Monitor clusters with Prometheus and Grafana</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#viewing-with-prometheus">Viewing with Prometheus</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#grafana-dashboard">Grafana Dashboard</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../image_catalog/">Image Catalog</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../bootstrap/">Bootstrap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../database_import/">Importing Postgres databases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../security/">Security</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../instance_manager/">Postgres instance manager</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../scheduling/">Scheduling</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../resource_management/">Resource management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../failure_modes/">Failure Modes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rolling_update/">Rolling Updates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../replication/">Replication</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../logical_replication/">Logical Replication</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../backup/">Backup</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wal_archiving/">WAL archiving</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../recovery/">Recovery</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../service_management/">Service Management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../postgresql_conf/">PostgreSQL Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../declarative_role_management/">PostgreSQL Role Management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../declarative_database_management/">PostgreSQL Database Management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../tablespaces/">Tablespaces</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../operator_conf/">Operator configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cluster_conf/">Instance pod configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../storage/">Storage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../labels_annotations/">Labels and annotations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../monitoring/">Monitoring</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../logging/">Logging</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../certificates/">Certificates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ssl_connections/">Client TLS/SSL connections</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../applications/">Connecting from an application</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../connection_pooling/">Connection pooling</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../replica_cluster/">Replica clusters</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../kubernetes_upgrade/">Kubernetes Upgrade and Maintenance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../postgres_upgrades/">PostgreSQL Upgrades</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../kubectl-plugin/">Kubectl Plugin</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../failover/">Automated failover</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../fencing/">Fencing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../declarative_hibernation/">Declarative hibernation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../postgis/">PostGIS</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../e2e/">End-to-End Tests</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../container_images/">Container Image Requirements</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../operator_capability_levels/">Operator capability levels</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../controller/">Custom Pod Controller</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../samples/">Examples</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../networking/">Networking</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../benchmarking/">Benchmarking</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">Frequently Asked Questions (FAQ)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../cloudnative-pg.v1/">API Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../supported_releases/">Supported releases</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../preview_version/">Preview Versions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../release_notes/">Release notes</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">CNCF Projects Integrations</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../cncf-projects/external-secrets/">External Secrets</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendixes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../appendixes/backup_volumesnapshot/">Appendix A - Backup on volume snapshots</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../appendixes/backup_barmanobjectstore/">Appendix B - Backup on object stores</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../appendixes/object_stores/">Appendix C - Common object stores for backups</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CloudNativePG v1.26</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="quickstart">Quickstart</h1>
<!-- SPDX-License-Identifier: CC-BY-4.0 -->

<p>This section guides you through testing a PostgreSQL cluster on your local machine by
deploying CloudNativePG on a local Kubernetes cluster
using either <a href="https://kind.sigs.k8s.io/">Kind</a> or
<a href="https://kubernetes.io/docs/setup/learning-environment/minikube/">Minikube</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The instructions contained in this section are for demonstration,
testing, and practice purposes only and must not be used in production.</p>
</div>
<p>Like any other Kubernetes application, CloudNativePG is deployed using
regular manifests written in YAML.</p>
<p>By following the instructions on this page you should be able to start a PostgreSQL
cluster on your local Kubernetes installation and experiment with it.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure that you have <code>kubectl</code> installed on your machine in order
to connect to the Kubernetes cluster. Please follow the Kubernetes documentation
on <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">how to install <code>kubectl</code></a>.</p>
</div>
<h2 id="part-1-setup-the-local-kubernetes-playground">Part 1: Setup the local Kubernetes playground</h2>
<p>The first part is about installing Minikube or Kind. Please spend some time
reading about the systems and decide which one to proceed with.
After setting up one of them, please proceed with part 2.</p>
<p>We also provide instructions for setting up monitoring with Prometheus and
Grafana for local testing/evaluation, in <a href="#part-4-monitor-clusters-with-prometheus-and-grafana">part 4</a></p>
<h3 id="minikube">Minikube</h3>
<p>Minikube is a tool that makes it easy to run Kubernetes locally. Minikube runs a
single-node Kubernetes cluster inside a Virtual Machine (VM) on your laptop for
users looking to try out Kubernetes or develop with it day-to-day. Normally, it
is used in conjunction with VirtualBox.</p>
<p>You can find more information in the official <a href="https://kubernetes.io/docs/tasks/tools/install-minikube">Kubernetes documentation on how to
install Minikube</a> in your local personal environment.
When you installed it, run the following command to create a minikube cluster:</p>
<pre><code class="language-sh">minikube start
</code></pre>
<p>This will create the Kubernetes cluster, and you will be ready to use it.
Verify that it works with the following command:</p>
<pre><code class="language-sh">kubectl get nodes
</code></pre>
<p>You will see one node called <code>minikube</code>.</p>
<h3 id="kind">Kind</h3>
<p>If you do not want to use a virtual machine hypervisor, then Kind is a tool for running
local Kubernetes clusters using Docker container "nodes" (Kind stands for "Kubernetes IN Docker" indeed).</p>
<p>Install <code>kind</code> on your environment following the instructions in the <a href="https://kind.sigs.k8s.io/docs/user/quick-start">Quickstart</a>,
then create a Kubernetes cluster with:</p>
<pre><code class="language-sh">kind create cluster --name pg
</code></pre>
<h2 id="part-2-install-cloudnativepg">Part 2: Install CloudNativePG</h2>
<p>Now that you have a Kubernetes installation up and running
on your laptop, you can proceed with CloudNativePG installation.</p>
<p>Please refer to the <a href="../installation_upgrade/">"Installation"</a> section and then proceed
with the deployment of a PostgreSQL cluster.</p>
<h2 id="part-3-deploy-a-postgresql-cluster">Part 3: Deploy a PostgreSQL cluster</h2>
<p>As with any other deployment in Kubernetes, to deploy a PostgreSQL cluster
you need to apply a configuration file that defines your desired <code>Cluster</code>.</p>
<p>The <a href="../samples/cluster-example.yaml"><code>cluster-example.yaml</code></a> sample file
defines a simple <code>Cluster</code> using the default storage class to allocate
disk space:</p>
<pre><code class="language-yaml">apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: cluster-example
spec:
  instances: 3

  storage:
    size: 1Gi
</code></pre>
<div class="admonition note">
<p class="admonition-title">There's more</p>
<p>For more detailed information about the available options, please refer
to the <a href="../cloudnative-pg.v1/">"API Reference" section</a>.</p>
</div>
<p>In order to create the 3-node PostgreSQL cluster, you need to run the following command:</p>
<pre><code class="language-sh">kubectl apply -f cluster-example.yaml
</code></pre>
<p>You can check that the pods are being created with the <code>get pods</code> command:</p>
<pre><code class="language-sh">kubectl get pods
</code></pre>
<p>That will look for pods in the default namespace. To separate your cluster
from other workloads on your Kubernetes installation, you could always create
a new namespace to deploy clusters on.
Alternatively, you can use labels. The operator will apply the <code>cnpg.io/cluster</code>
label on all objects relevant to a particular cluster. For example:</p>
<pre><code class="language-sh">kubectl get pods -l cnpg.io/cluster=&lt;CLUSTER&gt;
</code></pre>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note that we are using <code>cnpg.io/cluster</code> as the label. In the past you may
have seen or used <code>postgresql</code>. This label is being deprecated, and
will be dropped in the future. Please use <code>cnpg.io/cluster</code>.</p>
</div>
<p>By default, the operator will install the latest available minor version
of the latest major version of PostgreSQL when the operator was released.
You can override this by setting the <code>imageName</code> key in the <code>spec</code> section of
the <code>Cluster</code> definition. For example, to install PostgreSQL 13.6:</p>
<pre><code class="language-yaml">apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
   # [...]
spec:
   # [...]
   imageName: ghcr.io/cloudnative-pg/postgresql:13.6
   #[...]
</code></pre>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The immutable infrastructure paradigm requires that you always
point to a specific version of the container image.
Never use tags like <code>latest</code> or <code>13</code> in a production environment
as it might lead to unpredictable scenarios in terms of update
policies and version consistency in the cluster.
For strict deterministic and repeatable deployments, you can add the digests
to the image name, through the <code>&lt;image&gt;:&lt;tag&gt;@sha256:&lt;digestValue&gt;</code> format.</p>
</div>
<div class="admonition note">
<p class="admonition-title">There's more</p>
<p>There are some examples cluster configurations bundled with the operator.
Please refer to the <a href="../samples/">"Examples" section</a>.</p>
</div>
<h2 id="part-4-monitor-clusters-with-prometheus-and-grafana">Part 4: Monitor clusters with Prometheus and Grafana</h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Installing Prometheus and Grafana is beyond the scope of this project.
The instructions in this section are provided for experimentation and
illustration only.</p>
</div>
<p>In this section we show how to deploy Prometheus and Grafana for observability,
and how to create a Grafana Dashboard to monitor CloudNativePG clusters, and a
set of Prometheus Rules defining alert conditions.</p>
<p>We leverage the <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">Kube-Prometheus stack</a>
Helm chart, which is maintained by the <a href="https://github.com/prometheus-community">Prometheus Community</a>.
Please refer to the project website for additional documentation and background.</p>
<p>The Kube-Prometheus-stack Helm chart installs the <a href="https://prometheus-operator.dev">Prometheus Operator</a>,
including the <a href="https://prometheus.io/docs/alerting/latest/alertmanager/">Alert Manager</a>,
and a <a href="https://grafana.com">Grafana</a> deployment.</p>
<p>We include a configuration file for the deployment of this Helm chart that will
provide useful initial settings for observability of CloudNativePG clusters.</p>
<h3 id="installation">Installation</h3>
<p>If you don't have <a href="https://helm.sh">Helm</a> installed yet, please follow the
<a href="https://helm.sh/docs/intro/quickstart/">instructions</a> to install it in your
system.</p>
<p>We need to add the <code>prometheus-community</code> helm chart repository, and then
install the <em>Kube Prometheus stack</em> with our sample configuration
<a href="../samples/monitoring/kube-stack-config.yaml"><code>kube-stack-config.yaml</code></a>.</p>
<p>We can accomplish this with the following commands:</p>
<pre><code class="language-sh">helm repo add prometheus-community \
  https://prometheus-community.github.io/helm-charts

helm upgrade --install \
  -f https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/main/docs/src/samples/monitoring/kube-stack-config.yaml \
  prometheus-community \
  prometheus-community/kube-prometheus-stack
</code></pre>
<p>After completion, you will have Prometheus, Grafana, and Alert Manager,
configured with the <code>kube-stack-config.yaml</code> file:</p>
<ul>
<li>From the Prometheus installation, you will have the Prometheus Operator
  watching for <strong>any</strong> <code>PodMonitor</code> (see <a href="../monitoring/"><em>monitoring</em></a>).</li>
<li>Alert Manager and Grafana are both enabled.</li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Seealso</p>
<p>For further information about the above helm commands, refer to the <a href="https://helm.sh/docs/helm/helm_install/">helm
install</a>
documentation.</p>
</div>
<p>You can see several Custom Resources have been created:</p>
<pre><code class="language-sh">% kubectl get crds
NAME                                        CREATED AT
…
alertmanagers.monitoring.coreos.com         &lt;timestamp&gt;
…
prometheuses.monitoring.coreos.com          &lt;timestamp&gt;
prometheusrules.monitoring.coreos.com       &lt;timestamp&gt;
…
</code></pre>
<p>as well as a series of Services:</p>
<pre><code class="language-sh">% kubectl get svc     
NAME                                      TYPE        PORT(S)
…                                         …           …
prometheus-community-grafana              ClusterIP   80/TCP
prometheus-community-kube-alertmanager    ClusterIP   9093/TCP
prometheus-community-kube-operator        ClusterIP   443/TCP
prometheus-community-kube-prometheus      ClusterIP   9090/TCP
</code></pre>
<h3 id="viewing-with-prometheus">Viewing with Prometheus</h3>
<p>At this point, a CloudNativePG cluster deployed with monitoring activated
would be observable via Prometheus.</p>
<p>For example, you could deploy a simple cluster with <code>PodMonitor</code> enabled:</p>
<pre><code class="language-sh">kubectl apply -f - &lt;&lt;EOF
---
apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: cluster-with-metrics
spec:
  instances: 3

  storage:
    size: 1Gi

  monitoring:
    enablePodMonitor: true
EOF
</code></pre>
<p>To access Prometheus, port-forward the Prometheus service:</p>
<pre><code class="language-sh">kubectl port-forward svc/prometheus-community-kube-prometheus 9090
</code></pre>
<p>Then access the Prometheus console locally at: <a href="http://localhost:9090/"><code>http://localhost:9090/</code></a></p>
<p>You should find a series of metrics relating to CloudNativePG clusters.
Please refer to the <a href="../monitoring/">monitoring section</a> for more information.</p>
<p><img alt="local prometheus" src="../images/prometheus-local.png" /></p>
<p>You can also monitor the CloudNativePG operator by creating a PodMonitor to
target it. See the relevant section in the <a href="../monitoring/#monitoring-the-operator-with-prometheus">monitoring page</a>.</p>
<p>You can define some alerts by creating a <code>prometheusRule</code>:</p>
<pre><code class="language-sh">kubectl apply -f \
  https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/main/docs/src/samples/monitoring/prometheusrule.yaml
</code></pre>
<p>You should see the default alerts now:</p>
<pre><code class="language-sh">% kubectl get prometheusrules                      
NAME                                                       AGE
cnpg-default-alerts                                        3m27s
</code></pre>
<p>In the Prometheus console, you can click on the <em>Alerts</em> menu to see the alerts
we just installed.</p>
<h3 id="grafana-dashboard">Grafana Dashboard</h3>
<p>In our installation so far, Grafana is deployed with no predefined dashboards.</p>
<p>To open Grafana, you can port-forward the grafana service:</p>
<pre><code class="language-sh">kubectl port-forward svc/prometheus-community-grafana 3000:80
</code></pre>
<p>and access Grafana locally at <a href="http://localhost:3000/"><code>http://localhost:3000/</code></a>
providing the credentials <code>admin</code> as username, <code>prom-operator</code> as password
(defined in <code>kube-stack-config.yaml</code>).</p>
<p>CloudNativePG provides a default dashboard for Grafana in the dedicated
<a href="https://github.com/cloudnative-pg/grafana-dashboards"><code>grafana-dashboards</code> repository</a>.
You can download the file
<a href="https://github.com/cloudnative-pg/grafana-dashboards/blob/main/charts/cluster/grafana-dashboard.json">grafana-dashboard.json</a>
and manually import it via the GUI (menu: Dashboards &gt; New &gt; Import).
You can now click on the <code>CloudNativePG</code> dashboard just created:</p>
<p><img alt="local grafana" src="../images/grafana-local.png" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some graphs in the previous dashboard make use of metrics that are in alpha stage by the time
this was created, like <code>kubelet_volume_stats_available_bytes</code> and <code>kubelet_volume_stats_capacity_bytes</code>
producing some graphs to show <code>No data</code>.</p>
</div>
<p>Note that in our local setup, Prometheus and Grafana are configured to
automatically discover and monitor any CloudNativePG clusters deployed with the
Monitoring feature enabled.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../installation_upgrade/" class="btn btn-neutral float-left" title="Installation and upgrades"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../image_catalog/" class="btn btn-neutral float-right" title="Image Catalog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright © CloudNativePG a Series of LF Projects, LLC</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../installation_upgrade/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../image_catalog/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
